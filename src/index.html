<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>CordovaApp using RTCMultiConnection</title>

  <base href="/" />

  <meta name="color-scheme" content="light dark" />
  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />

  <link rel="icon" type="image/png" href="assets/icon/favicon.png" />

  <!-- add to homescreen for ios -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <style>
    video{
      z-index: 999;
    width: 200px;
    height: 200px;
    display: block;
    position: fixed;
    }
  </style>

</head>

<body>
  <app-root></app-root>
  <!-- <script src="/socket.io/socket.io.js"></script>
  <script src="./rtcjs/RTCMultiConnection.js"></script> -->
  <script src="https://rtcmulticonnection.herokuapp.com/dist/RTCMultiConnection.min.js"></script>
  <script src="https://rtcmulticonnection.herokuapp.com/socket.io/socket.io.js"></script>
  <script>
    window.onload=function(){
      var connection = new RTCMultiConnection();
    
    // this line is VERY_important
    connection.socketURL = 'http://localhost:9001/';
    
    // if you want audio+video conferencing
    connection.session = {
        audio: true,
        video: true
    };
    

    connection.sdpConstraints.mandatory = {
      OfferToReceiveAudio: true,
      OfferToReceiveVideo: true
  };

  connection.onstream = function(event) {
      document.body.appendChild( event.mediaElement );
  };


  // var predefinedRoomId = '123';
  // var predefinedRoomId = '123';
  // var predefinedRoomId = '123'
  

  //

  document.getElementById('btn-open-room').onclick = function() {
      var predefinedRoomId = document.getElementById('room-id').value;
      this.disabled = true;
      connection.open( predefinedRoomId );
      
  };

  document.getElementById('btn-join-room').onclick = function() {
      var predefinedRoomId = document.getElementById('room-id').value;
      this.disabled = true;
      connection.join( predefinedRoomId )
        
  };
  }
  
  // connection.openOrJoin('123');
  </script>
</body>

</html>
